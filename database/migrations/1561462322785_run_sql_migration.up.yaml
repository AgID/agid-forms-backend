- args:
    cascade: false
    sql: "CREATE OR REPLACE FUNCTION public.increment_version() RETURNS trigger\r\n
      \   LANGUAGE plpgsql\r\n    AS $$\r\nBEGIN\r\n  IF (TG_OP = 'UPDATE') THEN\r\n
      \   IF NEW.version < OLD.version + 1 THEN\r\n        RAISE EXCEPTION 'Cannot
      update an old revision (latest=%)', OLD.version\r\n        USING HINT = 'When
      updating set the current version of the content plus one';\r\n    ELSIF NEW.version
      > OLD.version + 1 THEN\r\n        RAISE EXCEPTION 'Cannot update the current
      revision with a wrong version (latest=%)', OLD.version \r\n        USING HINT
      = 'When updating set the current version of the content plus one';\r\n    ELSIF
      NEW.version IS NULL THEN\r\n        RAISE EXCEPTION 'Cannot update the current
      revision without provinding a version (latest=%)', OLD.version \r\n        USING
      HINT = 'When updating set the current version of the content plus one';\r\n
      \   END IF;\r\n    RETURN NEW;\r\n  END IF;\r\nEND;\r\n$$;\r\n"
  type: run_sql
